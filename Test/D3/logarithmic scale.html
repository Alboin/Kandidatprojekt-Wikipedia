<!DOCTYPE <!DOCTYPE html>
<html>
<head>
	<title>Logarithmic Scale</title>
	<meta charset="utf-8">
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body style="width:100%;height:100%;margin:0;">
	<script>
		var svg = d3.select('body').append('svg').attr('width', '100%').attr('height', '100%');	

		var handle_width = 20, handle_height = 40;

		var drag1 = d3.behavior.drag()
			.on('dragstart', function() {
				console.log("Start drag");
			})
			.on('drag', function() {
				left_handle.attr('x', (d3.event.x - 10));
				if(d3.event.x < 0.2 * window.innerWidth)
					left_handle.attr('x', (0.2 * window.innerWidth - 10));
				if(d3.event.x > parseInt(right_handle.attr('x')) - parseInt(right_handle.attr('width')) / 2)
					left_handle.attr('x', parseInt(right_handle.attr('x')) - parseInt(right_handle.attr('width')));

			})
			.on('dragend', function() {
				console.log("End drag");
		});

		var drag2 = d3.behavior.drag()
			.on('dragstart', function() {
				console.log("Start drag");
			})
			.on('drag', function() {
				right_handle.attr('x', (d3.event.x - 10));
				if(d3.event.x > 0.8 * window.innerWidth)
					right_handle.attr('x', (0.8 * window.innerWidth - 10));
				if(d3.event.x < parseInt(left_handle.attr('x')) + 1.5 * parseInt(left_handle.attr('width')))
					right_handle.attr('x', parseInt(left_handle.attr('x')) + parseInt(left_handle.attr('width')));
			})
			.on('dragend', function() {
				console.log("End drag");
		});



		var time_line = svg.append('rect')
			.attr('x', window.innerWidth * 0.2)
			.attr('width', '60%')
			.attr('y', '100px')
			.attr('height', '20px')
			.attr('rx', '4')
			.style('fill', 'grey');

		var marked_time = svg.append('rect')
			.attr('x', time_line.attr('x'))
			.attr('width', time_line.attr('width'))
			.attr('y', time_line.attr('y'))
			.attr('height', time_line.attr('height'))
			.style('fill', 'yellow');

		var left_handle = svg.append('rect')
			.attr('x', time_line.attr('x'))
			.attr('width', '20px')
			.attr('y', '90px')
			.attr('height', '40px')
			.attr('rx', 4)
			.style('fill', 'red')
			.call(drag1);

		var right_handle = svg.append('rect')
			.attr('x', time_line.attr('width'))
			.attr('width', '20px')
			.attr('y', '90px')
			.attr('height', '40px')
			.attr('rx', 4)
			.style('fill', 'green')
			.call(drag2);




	</script>

</body>
</html>