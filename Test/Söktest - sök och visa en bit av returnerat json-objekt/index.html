<!DOCTYPE html>
<html>
	<head>
		<input type="text", id="searchtext"></input>
		<button id="search"> Search </button>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script>

		document.getElementById("search").addEventListener("click", function(event)
		{
			var query1 = "/w/api.php?action=query&list=search&format=json&srsearch=";
			var query2 = "&srprop=snippet&titles=Main%20Page";
			var usertext = document.getElementById("searchtext").value;
			usertext = usertext.replace(" ", "%20");
			console.log(query1 + usertext + query2);
		    searchWiki(query1 + usertext + query2);
		});
		//var query = "/w/api.php?action=parse&format=json&prop=text&section=0&page=Jimi_Hendrix";
		//var query = "/w/api.php?action=query&list=search&format=json&srsearch=mamma%20mia&srprop=snippet&titles=Main%20Page";
		
		
		
		function searchWiki(query){
			var urlvar = "http://en.wikipedia.org" + query + "&callback=?";
			$(document).ready(function(){
		 
			    $.ajax({
			        type: "GET",
			        url: urlvar,
			        contentType: "application/json; charset=utf-8",
			        async: false,
			        dataType: "json",
			        success: function (data, textStatus, jqXHR) {
			            print(data);
			        },
			        error: function (errorMessage) {
			        	console.log("det blev fel");
			        }
			    });
			});
		}

		function print(data) {
			for(var indx = 0; indx < data.query.search.length; indx++) {
				document.getElementById("hejsan").innerHTML += data.query.search[indx].snippet;
				document.getElementById("hejsan").innerHTML += "<br><br>";
			}
		}



	</script>
	</head>
	<body>

	<p id="hejsan"></p>

	</body>
</html>